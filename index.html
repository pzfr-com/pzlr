<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Séminaire 2025 – Programme</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/abef069671.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-gray-50 text-gray-800">

  <header class="bg-white shadow p-4 flex justify-center">
    <img src="https://cdn.primagaz.fr/-/media/sites/france/settings/primagaz.svg" alt="Logo Séminaire" class="w-24 h-auto" />
  </header>

  <main class="max-w-5xl mx-auto px-6 py-10">
    <div id="error" class="hidden text-center text-red-600 text-lg font-semibold mb-8"></div>

    <div id="content" class="hidden">
      <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-gray-900">
          Bienvenue <span id="nom" class="text-red-600">Participant</span>
        </h1>
        <p class="text-gray-600 mt-2">La Rochelle, 8-10 septembre 2025</p>

        <a id="livret-link" href="#" class="inline-block mt-6">
          <button type="button" class="bg-red-600 hover:bg-red-700 text-white font-semibold rounded-full px-6 py-2 transition">
            <i class="fa-solid fa-book"></i> Livret d'accueil
          </button>
        </a>
      </div>

      <section class="bg-white shadow-md rounded-xl p-6 mb-10">
        <h2 class="text-2xl font-semibold text-red-700 mb-4"><i class="fa-solid fa-calendar"></i> Mon agenda</h2>
        <ol class="space-y-6" id="agenda"></ol>
      </section>
    </div>
  </main>

  <script>
    const p = new URLSearchParams(window.location.search);
    const nom = p.get("nom");

    if (!nom) {
      document.getElementById("error").textContent = "Erreur : nous ne trouvons pas votre enregistrement.";
      document.getElementById("error").classList.remove("hidden");
    } else {
      document.getElementById("content").classList.remove("hidden");
      document.getElementById("nom").textContent = nom;

      // Rediriger vers livret avec les mêmes paramètres
      document.getElementById("livret-link").href = `livret-accueil.html?${p.toString()}`;

      const agenda = document.getElementById("agenda");

      const block = (classes, title, content = "", extra = "") => `
        <li>
          ${extra ? `<time class="block text-sm text-gray-500 font-medium mt-4 mb-1">${extra}</time>` : ""}
          <div class="${classes} p-4 rounded-lg shadow-sm border-l-4 border-red-500">
            <p class="font-semibold text-gray-800">${title}</p>
            ${content ? `<p class="text-sm text-gray-600 mt-1">${content}</p>` : ""}
          </div>
        </li>
      `;

      const addBlock = (html) => agenda.insertAdjacentHTML('beforeend', html);

      // Jour 1
      addBlock(block("bg-red-50", "14:00 – Safety induction", "Introduction welcome, déroulé, safety moment", "Lundi 8/09"));
      addBlock(block("bg-red-50", "14:30 – Contexte Primagaz", "Ecosystem de Primagaz aujourd'hui"));
      addBlock(block("bg-red-50", "15:10 – Look Back", "Mise à l’honneur collaborateurs / équipes"));
      addBlock(block("bg-red-50", "16:00 – Primagaz d'aujourd'hui à demain"));
      addBlock(block("bg-[#F6FAFF]", "18:55 – Soirée", "1er retour : 23h25<br>2nd retour : 23h55"));

      // Jour 2
      addBlock(block("bg-red-50", "9:00 – Safety", "", "Mardi 9/09"));
      addBlock(block("bg-red-50", "09:15 – Culture Managériale", "Notre Levier de Réussite (Postures, Pratiques, Performance)"));

      const ateliers = ["1", "2", "3"];
      ateliers.forEach((at, i) => {
        const salle = p.get(`2_${at}_S`);
        const table = p.get(`2_${at}_T`);
        if (salle && table) {
          addBlock(block("bg-red-50", `Atelier ${i+1}`, `Salle : ${salle}, Table : ${table}`));
        }
      });

      const team = p.get("2_4_G");
      if (team) {
        addBlock(block("bg-red-50", "14:15 – Team Building", `Groupe : ${team}`));
      }

      addBlock(block("bg-red-50", "18:15 – Inclusivité chez PZ"));
      addBlock(block("bg-[#F6FAFF]", "20:45 – Soirée"));

      // Jour 3
      agenda.insertAdjacentHTML('beforeend', `
        <li>
          <time class="block text-sm text-gray-500 font-medium mt-4 mb-1">Mercredi 10/09</time>
        </li>
      `);

      const j3 = ateliers.map((at, i) => {
        const salle = p.get(`3_${at}_S`);
        return salle ? `Atelier ${i+1} : <span class='font-medium text-red-700'>${salle}</span>` : null;
      }).filter(Boolean).join("<br>");
      
      if (j3) {
        addBlock(block("bg-red-50", "09:30 – Ateliers Pratico-Pratiques", j3));
      }
      
      addBlock(block("bg-red-50", "12:30 – Conclusion du séminaire"));

    }
  </script>
</body>
</html>
